const formData = {
  username : 'johndoe90',
  LoanAmount : '12356',
  Loan_Amount : '12356',
  Loan_amount : '12356',
  fullName: 'John Doe',
  full_Name: 'John Doe',
  father_name: 'John Doe',
  mother_Name: 'Mother Doe',
  mother_name: 'Mother Doe',
  fatherName: 'John Doe',
  motherName: 'Mother Doe',
  father_Name: 'John Doe',
  mother_Name: 'Mother Doe',
  full_name: 'John Doe',
  basic_firstName: 'John',
  basic_firstName: 'John',
  firstName: 'John',
  FirstName: 'John',
  basic_lastName: 'Doe',
  LastName: 'Doe',
  basic_last_name: 'Doe',
  lastName: 'Doe',
  middleName: 'Alan',
  fname: 'John',
  fName: 'John',
  lname: 'Doe',
  first_name: 'John',
  basic_first_name: 'John',
  last_name: 'Doe',
  middle_name: 'Alan',
  mName: 'Alan',
  m_name: 'Alan',
  dob: '1990-01-01',
  DOB: '1990-01-01',
  date_of_birth: '1990-01-01',
  birth_date: '1990-01-01',
  gender: 'Male',
  Gender: 'Male',
  marital_status: 'Single',
  nationality: 'Indian',
  id_number: 'AB123456',
  id_type: 'Passport',
  user_id: 'johndoe90',
  company_email: 'john.doe@example.com',
  user_email: 'john.doe@example.com',
  email: 'john.doe@example.com',
  phone: '9876543210',
  alternateMobile: '9876543210',
  alternate_Mobile: '9876543210',
  Alternate_Mobile: '9876543210',
  basic_mobile_number: '9876543210',
  alternate_mobile_number: '9876543210',
  alternate_Mobile_Number: '9876543210',
  mobileNumber: '9876543210',
  basic_mobile: '9876543210',
  basic_mobile: '9876543210',
  MobileNo: '9876543210',
  mobile_number: '9876543210',
  mobile: '9876543210',
  mobile_no: '9876543210',
  contact: '9876543210',
  contact_number: '9876543210',
  alt_phone: '9123456789',
  passport_number: 'P1234567',
  voter_id: 'VOTER12345',
  aadhaar_number: '123456789012',
  aadhar: '236547896545',
  aadhar_no: '236547896545',
  aadhar_number: '236547896545',
  aadharNumber: '236547896545',
  aadharNo: '236547896545',
  PANcard: 'COHPN7878G',
  basic_pancard: 'COHPN7878G',
  basic_pan: 'COHPN7878G',
  basic_pan: 'COHPN7878G',
  pancard: 'COHPN7878G',
  panNumber: 'COHPN7878G',
  pan_card: 'COHPN7878G',
  pan: 'COHPN7878G',
  driving_license: 'DL12345678',
  fullName: 'John Doe',
  firstName: 'John',
  lastName: 'Doe',
  middleName: 'Alan',
  fname: 'John',
  lname: 'Doe',
  lName: 'Doe',
  first_name: 'John',
  last_name: 'Doe',
  middle_name: 'Alan',
  dob: '1990-01-01',
  date_of_birth: '1990-01-01',
  birth_date: '1990-01-01',
  gender: 'Male',
  marital_status: 'Single',
  nationality: 'Indian',
  id_number: 'AB123456',
  id_type: 'Passport',
  user_id: 'johndoe90',
  basic_email: 'john.doe@example.com',
  user_email: 'john.doe@example.com',
  email: 'john.doe@example.com',
  phone: '9876543210',
  mobile: '9876543210',
  contact: '9876543210',
  contact_number: '9876543210',
  alt_phone: '9123456789',
  passport_number: 'P1234567',
  voter_id: 'VOTER12345',
  aadhaar_number: '123456789012',
  pan_card: 'ABCDE1234F',
  driving_license: 'DL12345678',
  address_line_1: '123 Main Street',
  address_line_2: '123 Main Street',
  address_line_3: '123 Main Street',
  currentAddress: '123 Main Street',
  current_Address: '123 Main Street',
  current_address: '123 Main Street',
  residenceAddress: '123 Main Street',
  residence_address: '123 Main Street',
  address: '123 Main Street',
  address1: '123 Main Street',
  address2: 'Apartment 456',
  address3: 'Apartment 456',
  addressLine1: '123 Main Street',
  addressline1: '123 Main Street',
  addressLine2: '123 Main Street',
  addressLine3: '123 Main Street',
  addressline3: '123 Main Street',
  addressline2: 'Apartment 456',
  street_address: '123 Main Street',
  locality: 'Greenwood',
  addressCity: 'New Delhi',
  addressState: 'New Delhi',
  city: 'New Delhi',
  City: 'New Delhi',
  OfficeCity: 'New Delhi',
  Office_city: 'New Delhi',
  State: 'Delhi',
  state: 'Delhi',
  OfficeState: 'Delhi',
  country: 'India',
  zip: '110001',
  zip_code: '110001',
  curr_pincode: '110001',
  officePincode: '110001',
  office_Pincode: '110001',
  ofcPincode: '110001',
  ofc_Pincode: '110001',
  OFCPincode: '110001',
  OFC_Pincode: '110001',
  OFC_pincode: '110001',
  Office_pincode: '110001',
  ofc_pincode: '110001',
  ofc_pin: '110001',
  ofice_pin: '110001',
  pincode: '110001',
  Pincode: '110001',
  postal_code: '110001',
  landmark: 'Near Greenwood Park',
  house_number: 'A-123',
  flat_number: '456',
  area: 'Sector 5',
  district: 'North Delhi',
  nearest_police_station: 'Civil Lines',
  employer_name: 'Acme Corp',
  company_name: 'Acme Corp',
  CompanyName: 'Acme Corp',
  companyName: 'Acme Corp',
  company_Name: 'Acme Corp',
  organization: 'Acme Corp',
  designation: 'Software Developer',
  job_title: 'Software Developer',
  occupation: 'Software Developer',
  annual_income: '800000',
  AnnualIncome: '800000',
  basic_monthlyIncome: '65000',
  monthlyIncome: '65000',
  MonthlyIncome: '65000',
  monthly_income: '65000',
  monthly_income: '65000',
  monthly_income_id: '65000',
  monthlyInc: '65000',
  MonthIncome: '65000',
  income_mode: 'Salried',
  workExp: '6',
  work_Exprience: '6',
  work_exprience: '6',
  Work_Exprience: '6',
  profession: 'IT Professional',
  employment_type: 'Full-Time',
  workExperience: '5 ',
  work_Experience: '5 ',
  work_experience: '5 ',
  totalWorkExperience: '5 years',
  total_Work_Experience: '5 years',
  total_work_experience: '5 years',
  Total_Work_Experience: '5 years',
  ttl_Work_exp: '5 years',
  work_experience: '5 years',
  employment_status: 'Employed',
  industry: 'Information Technology',
  perma_add: '456 Corporate Avenue',
  permanent_address: '456 Corporate Avenue',
  permanentAddress: '456 Corporate Avenue',
  perma_add1: '456 Corporate Avenue',
  permanent_address1: '456 Corporate Avenue',
  permanentAddress1: '456 Corporate Avenue',
  perma_add3: '456 Corporate Avenue',
  permanent_address3: '456 Corporate Avenue',
  permanentAddress3: '456 Corporate Avenue',
  preferAddress: '456 Corporate Avenue',
  Office_Address: '456 Corporate Avenue',
  office_address: '456 Corporate Avenue',
  officeAddress: '456 Corporate Avenue',
  OrganizationName: 'wishfin',
  currentCity: 'New Delhi',
  Current_City: 'New Delhi',
  current_City: 'New Delhi',
  current_city: 'New Delhi',
  Current_City: 'New Delhi',
  city_name: 'New Delhi',
  cityName: 'New Delhi',
  office_city: 'New Delhi',
  office_pincode: '110002',
  basic_currentPincode: '110002',
  basic_officePincode: '110002',
  office_phone: '01112345678',
  office_email: 'hr@acmecorp.com',
  officeEmail: 'hr@acmecorp.com',
  officeEmail: 'hr@acmecorp.com',
  emailId: 'hr@acmecorp.com',
  EmailID: 'hr@acmecorp.com',
  Email_ID: 'hr@acmecorp.com',
  Email: 'hr@acmecorp.com',
  email: 'hr@acmecorp.com',
  email_address: 'hr@acmecorp.com',
  email_Address: 'hr@acmecorp.com',
  Email_Address: 'hr@acmecorp.com',
  ofc_email_id: 'hr@acmecorp.com',
  email_id: 'hr@acmecorp.com',
  salary_account: '1234567890',
  bank_name: 'State Bank of India',
  bank_Name: 'State Bank of India',
  bankName: 'State Bank of India',
  other_bank: 'State Bank of India',
  account_holder_name: 'John Doe',
  account_number: '123456789012',
  accNumber: '123456789012',
  accountNumber: '123456789012',
  accountNo: '123456789012',
  Acn: '123456789012',
  acn: '123456789012',
  ifsc_code: 'SBIN0012345',
  ifsc: 'SBIN0012345',
  micr_code: '110002345',
  branch_name: 'Connaught Place',
  account_type: 'Savings',
  net_banking_enabled: 'Yes',
  debit_card_number: '4111111111111111',
  credit_card_number: '5432111111111111',
  upi_id: 'johndoe@upi',
  bank_statement: 'Uploaded',
  loan_amount: '500000',
  loan_purpose: 'Home Renovation',
  tenure: '60 months',
  tenure_amount: '60 months',
  interest_rate: '7.5%',
  emi: '10235',
  down_payment: '50000',
  loan_status: 'Approved',
  outstanding_balance: '300000',
  disbursal_date: '2023-01-01',
  repayment_start_date: '2023-02-01',
  preferred_contact_time: '10 AM - 12 PM',
  education: 'Bachelor of Science',
  course: 'Computer Science',
  university: 'Delhi University',
  year_of_passing: '2012',
  hobbies: 'Reading, Traveling',
  languages_known: 'English, Hindi',
  family_members: '4',
  dependent_family_members: '2',
  referral_code: 'REF12345',
  promotional_code: 'PROMO2023',
  tax_id: 'TAX123456',
  gst_number: 'GST123456789',
  registration_number: 'REG12345',
  application_id: 'APP12345',
  customer_id: 'CUST12345',
  policy_number: 'POL12345',
  ticket_number: 'TICKET12345',
  vehicle_registration: 'DL01AB1234',
  chassis_number: 'CH1234567890',
  engine_number: 'EN1234567890',
  preferred_branch: 'Connaught Place',
  preferred_appointment_date: '2023-01-15',
  preferred_appointment_time: '11:00 AM',
  complaint_id: 'COMP12345',
  inquiry_id: 'INQ12345',
  membership_id: 'MEM12345',


  Occupation: true, 
  CC_Holder: true, 
  terms: true, 
  terms_condition: true, 
  terms_condition1: true, 
  terms_condition2: true, 
  terms_condition3: true, 
  financialStatementsAudited: "true", 
  termsAndCondition: true, 
  termsAndCondition1: true, 
  termsAndCondition2: true, 
  termsAndCondition3: true, 
  accept: true, 
  accept1: true, 
  accept2: true, 
  accept3: true, 
  GstReturn: true, 
  BusinessVintage: true, 
  CarBooked: true, 
  consent_option: true, 
  consent_option_no: true, 
  emp_status1: true, 
  emp_status2: true, 
  FilterCoupon: true, 
  current_add_same_as_kyc: true, 
  employment_type: 'Salaried', 
  employment_type: 'salaried', 
  emp_type: 'Salried', 
  empType: 'Salried',
  employmentType: 'Salried',
  gender: 'male',
  perferAddress: '1',
  identifiedProperty: '1',
  identifiedProperty: '1',
  maritalStatus: 'Married',
  selectAddress: 'Yes',
  preferredComAddress: '1',
  card_name: '1',
  Gender: 'male',
  ResidenceStatus: 'Rented',
  financialStatementsAudited: 'Rented',
  consent_option: 'Yes',
  LoanAny_check: 'Yes',
  CardHolder: 'Yes',
  officeStatus: 'Yes',
  LoanAny_check: 'Yes',

  EmploymentType: 'Salaried', 
  AnnualIncome: 'Above ₹10 Lakh', 

  gender: 'male',
  CardType: 'CC',
  Interest: 'Yes',
  PaymentMethod: 'CC',
  PropertyIdentified: 'Yes',
  addressVerify: 'Yes',

};


chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.action === 'fillForm') {
    if (typeof jQuery === 'undefined') {
      console.error('jQuery is not loaded!');
      return;
    }
    console.log('jQuery loaded successfully.');

  

    const triggerEvents = (element, events = ['change', 'input', 'blur']) => {
      events.forEach(eventType => {
        const event = new Event(eventType, { bubbles: true });
        element.dispatchEvent(event);
      });
    };

    const setSelectMenuValue = (element) => {
      try {
        const $select = $(element);
        
        const secondOption = element.options[1];
        
        if (secondOption) {
          const secondValue = secondOption.value;
          
          $select.val(secondValue);
          
          const $button = $(`#${element.id}-button`);
          if ($button.length) {
            const selectedText = secondOption.text;
            $button.find('.ui-selectmenu-text').text(selectedText);
          }
          
          $select.removeClass('invalid');
          $button.removeClass('invalid');
          $select.closest('.form-group').removeClass('has-error');
          
          triggerEvents(element);
          
          console.log(`Updated ${element.id} with second option - value: ${secondValue}`);
        } else {
          console.warn(`No second option found for ${element.id}`);
        }
      } catch (error) {
        console.error(`Error updating select for ${element.id}:`, error);
      }
    };
    const handleInput = (element) => {
      if (!element) return;

      if (element.tagName.toLowerCase() === 'select') {
        setTimeout(() => setSelectMenuValue(element), 100);
      } 
      else if (element.type === 'radio') {
        const allRadios = document.getElementsByName(element.name);
        Array.from(allRadios).forEach(radio => {
          radio.checked = true;
          triggerEvents(radio);
        });
      }
      else if (element.type === 'checkbox') {
        element.checked = true;
        element.setAttribute('checked', 'checked');
        triggerEvents(element);
      }
      else {
        const value = formData[element.name] || formData[element.id] || '';
        element.value = value;
        triggerEvents(element);
      }
    };

    Object.keys(formData).forEach((key) => {
      const inputById = document.getElementById(key);
      if (inputById) {
        handleInput(inputById);
      }

      const inputsByName = document.getElementsByName(key);
      if (inputsByName.length > 0) {
        Array.from(inputsByName).forEach(handleInput);
      }
    });

    setTimeout(() => {
      const firstKey = Object.keys(formData)[0];
      const firstInput = document.getElementById(firstKey) || document.getElementsByName(firstKey)[0];
      const form = firstInput?.form;
      if (form) {
        form.submit();
      }
    }, 1000);
  }
});